<h1>ActiveSupport::Testing::Assertions#assert_difference</h1>

Test numeric difference between the return value of an expression as a result of what is evaluated
in the yielded block.

  assert_difference 'Article.count' do
    post :create, :article => {...}
  end

An arbitrary expression is passed in and evaluated.

  assert_difference 'assigns(:article).comments(:reload).size' do
    post :create, :comment => {...}
  end

An arbitrary positive or negative difference can be specified. The default is +1.

  assert_difference 'Article.count', -1 do
    post :delete, :id => ...
  end

An array of expressions can also be passed in and evaluated.

  assert_difference [ 'Article.count', 'Post.count' ], +2 do
    post :create, :article => {...}
  end

A lambda or a list of lambdas can be passed in and evaluated:

  assert_difference lambda { Article.count }, 2 do
    post :create, :article => {...}
  end

  assert_difference [->{ Article.count }, ->{ Post.count }], 2 do
    post :create, :article => {...}
  end

A error message can be specified.

  assert_difference 'Article.count', -1, "An Article should be destroyed" do
    post :delete, :id => ...
  end




