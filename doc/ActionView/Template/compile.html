<h1>ActionView::Template#compile</h1>

Among other things, this method is responsible for properly setting
the encoding of the compiled template.

If the template engine handles encodings, we send the encoded
String to the engine without further processing. This allows
the template engine to support additional mechanisms for
specifying the encoding. For instance, ERB supports <%# encoding: %>

Otherwise, after we figure out the correct encoding, we then
encode the source into <tt>Encoding.default_internal</tt>.
In general, this means that templates will be UTF-8 inside of Rails,
regardless of the original source encoding.




