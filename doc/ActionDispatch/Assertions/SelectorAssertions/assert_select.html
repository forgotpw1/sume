<h1>ActionDispatch::Assertions::SelectorAssertions#assert_select</h1>

An assertion that selects elements and makes one or more equality tests.

If the first argument is an element, selects all matching elements
starting from (and including) that element and all its children in
depth-first order.

If no element if specified, calling +assert_select+ selects from the
response HTML unless +assert_select+ is called from within an +assert_select+ block.

When called with a block +assert_select+ passes an array of selected elements
to the block. Calling +assert_select+ from the block, with no element specified,
runs the assertion on the complete set of elements selected by the enclosing assertion.
Alternatively the array may be iterated through so that +assert_select+ can be called
separately for each element.


==== Example
If the response contains two ordered lists, each with four list elements then:
  assert_select "ol" do |elements|
    elements.each do |element|
      assert_select element, "li", 4
    end
  end

will pass, as will:
  assert_select "ol" do
    assert_select "li", 8
  end

The selector may be a CSS selector expression (String), an expression
with substitution values, or an HTML::Selector object.

=== Equality Tests

The equality test may be one of the following:
* <tt>true</tt> - Assertion is true if at least one element selected.
* <tt>false</tt> - Assertion is true if no element selected.
* <tt>String/Regexp</tt> - Assertion is true if the text value of at least
  one element matches the string or regular expression.
* <tt>Integer</tt> - Assertion is true if exactly that number of
  elements are selected.
* <tt>Range</tt> - Assertion is true if the number of selected
  elements fit the range.
If no equality test specified, the assertion is true if at least one
element selected.

To perform more than one equality tests, use a hash with the following keys:
* <tt>:text</tt> - Narrow the selection to elements that have this text
  value (string or regexp).
* <tt>:html</tt> - Narrow the selection to elements that have this HTML
  content (string or regexp).
* <tt>:count</tt> - Assertion is true if the number of selected elements
  is equal to this value.
* <tt>:minimum</tt> - Assertion is true if the number of selected
  elements is at least this value.
* <tt>:maximum</tt> - Assertion is true if the number of selected
  elements is at most this value.

If the method is called with a block, once all equality tests are
evaluated the block is called with an array of all matched elements.

==== Examples

  # At least one form element
  assert_select "form"

  # Form element includes four input fields
  assert_select "form input", 4

  # Page title is "Welcome"
  assert_select "title", "Welcome"

  # Page title is "Welcome" and there is only one title element
  assert_select "title", {:count => 1, :text => "Welcome"},
      "Wrong title or more than one title element"

  # Page contains no forms
  assert_select "form", false, "This page must contain no forms"

  # Test the content and style
  assert_select "body div.header ul.menu"

  # Use substitution values
  assert_select "ol>li#?", /item-\d+/

  # All input fields in the form have a name
  assert_select "form input" do
    assert_select "[name=?]", /.+/  # Not empty
  end




