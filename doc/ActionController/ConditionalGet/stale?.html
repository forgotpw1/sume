<h1>ActionController::ConditionalGet#stale?</h1>

Sets the etag and/or last_modified on the response and checks it against
the client request. If the request doesn't match the options provided, the
request is considered stale and should be generated from scratch. Otherwise,
it's fresh and we don't need to generate anything and a reply of <tt>304 Not Modified</tt> is sent.

Parameters:
* <tt>:etag</tt>
* <tt>:last_modified</tt>
* <tt>:public</tt> By default the Cache-Control header is private, set this to true if you want your application to be cachable by other devices (proxy caches).

Example:

  def show
    @article = Article.find(params[:id])

    if stale?(:etag => @article, :last_modified => @article.created_at)
      @statistics = @article.really_expensive_call
      respond_to do |format|
        # all the supported formats
      end
    end
  end

You can also just pass a record where last_modified will be set by calling updated_at and the etag by passing the object itself. Example:

  def show
    @article = Article.find(params[:id])

    if stale?(@article)
      @statistics = @article.really_expensive_call
      respond_to do |format|
        # all the supported formats
      end
    end
  end

When passing a record, you can still set whether the public header:

  def show
    @article = Article.find(params[:id])

    if stale?(@article, :public => true)
      @statistics = @article.really_expensive_call
      respond_to do |format|
        # all the supported formats
      end
    end
  end




